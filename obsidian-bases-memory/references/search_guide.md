# 智能检索指南

本文档基于 `obsidian-memory-retriever` 设计，说明了记忆系统中的高级检索能力和使用方法。

## 搜索模式

系统支持三种层级的搜索模式，适应不同的查询需求。

### 1. 关键词搜索 (Keyword Search)
*最基础、最快速的搜索方式。*

- **原理**: 精确匹配标题、内容和标签中的关键词。
- **权重**: 标题匹配 (10分) > 内容匹配 (5分) > 标签匹配 (3分)。
- **适用场景**: 查找特定的技术名词、项目名称或已知标题。
- **示例**: `/search PostgreSQL`

### 2. 语义搜索 (Semantic Search)
*基于意图理解的智能搜索。*

- **原理**: 将查询转换为向量，计算与记忆库中记录的余弦相似度。
- **能力**: 即使没有关键词匹配，也能找到语义相关的记录。
- **适用场景**: 模糊回忆、查找相关概念、自然语言提问。
- **示例**: `/semantic 我们之前讨论过数据库选择吗？`

### 3. 混合搜索 (Hybrid Search)
*结合精准度与广度的最佳实践。*

- **原理**: `0.3 * 关键词得分 + 0.7 * 语义得分`。
- **优势**: 既能保证关键词的存在，又能理解上下文语境。
- **适用场景**: 复杂查询、调研回顾。
- **示例**: `/find API 相关的技术决策`

## 搜索过滤器

使用过滤器缩小搜索范围，提高精准度。

| 过滤器类型 | 语法示例 | 说明 |
| :--- | :--- | :--- |
| **日期** | `/today`, `/this-week` | 限制时间范围 |
| **类型** | `/type decision` | 仅查找决策、会议等特定类型 |
| **重要程度** | `/important` | 仅查找 4 星及以上的重要记录 |
| **状态** | `/pending` | 仅查找进行中的任务 |
| **项目** | `/project "Acme App"` | 仅查找特定项目的记录 |

## 结果展示与交互

搜索结果将按相关性排序，并提供以下信息：

1. **标题与评分**: 显示匹配度和重要程度 (e.g., `[1] ⭐⭐⭐⭐ 数据库选择 (89%)`)
2. **关键元数据**: 日期、类型、标签
3. **摘要/片段**: 显示匹配关键词周围的上下文
4. **操作选项**: 直接打开、查看详情或进行后续操作

## 索引机制

- **自动索引**: 系统会监控 `memory/` 文件夹的变化，自动更新索引。
- **缓存**: 常用查询结果会被缓存，提升响应速度。
- **向量化**: 首次使用语义搜索时，需要对现有笔记进行向量化处理（由 Retriever 模块处理）。
