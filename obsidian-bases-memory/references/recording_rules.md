# 记录规则与自动化指南

本文档基于 `obsidian-memory-recorder` 设计，定义了记忆系统中的数据记录标准和自动化填充规则。

## 核心记录流程

```
用户输入 -> 模式识别 -> 信息提取 -> 规则验证 -> 自动填充 -> 生成记录
```

## 字段自动填充规则

### 1. 标题生成规则
系统根据记录类型自动生成标准化的标题：

- **决策类**: `类型 - 核心内容` (例: "决策 - 选择 PostgreSQL")
- **会议类**: `会议 - 主题/参与者` (例: "会议 - API 设计评审")
- **学习类**: `学习 - 技术/主题` (例: "学习 - Rust 所有权机制")
- **默认**: 提取内容的前 20 个字符作为标题

### 2. 标签推断逻辑
基于内容关键词自动推荐标签：

| 关键词类别 | 匹配词示例 | 推断标签 |
| :--- | :--- | :--- |
| **数据库** | 数据库, SQL, Mongo, Redis | `#技术`, `#数据库` |
| **API** | API, REST, GraphQL, 接口 | `#技术`, `#API` |
| **决策** | 决定, 选择, 采用, 放弃 | `#技术`, `#决策` |
| **会议** | 会议, 讨论, 沟通, Sync | `#会议` |
| **学习** | 学习, 研究, 阅读, 教程 | `#学习` |
| **重要** | 重要, 核心, 关键, 紧急 | `#重要` |

### 3. 重要程度评级
系统默认的重要程度（1-5 星）分配规则：

- **决策 (Decision)**: ⭐⭐⭐⭐ (4星) - 技术决策通常具有长期影响
- **重要 (Important)**: ⭐⭐⭐⭐⭐ (5星) - 显式标记为重要的内容
- **完成 (Completed)**: ⭐⭐⭐ (3星) - 已完成的任务或里程碑
- **讨论 (Discussion)**: ⭐⭐⭐ (3星) - 一般性讨论
- **学习 (Learning)**: ⭐⭐⭐ (3星) - 知识积累
- **默认**: ⭐⭐⭐ (3星)

### 4. 类型推断
根据上下文动词推断记录类型：

- "决定"、"选择" -> **决策**
- "会议"、"开会" -> **会议记录**
- "学习"、"研究" -> **学习笔记**
- "记录"、"笔记" -> **每日日志**

## 记录命令参考

在集成了 Recorder 模块后，支持以下快捷指令：

- `/record [内容]` - 智能记录当前对话或想法
- `/record-struct` - 交互式填写结构化表单
- `/decision [内容]` - 快速记录一条决策
- `/meeting [主题] [参与者]` - 快速开始会议记录

## 最佳实践

1. **及时记录**: 决策发生时立即记录，利用自动推断减少手动输入。
2. **结构化优先**: 尽可能提供完整的上下文（项目、参与者），有助于后续检索。
3. **人工确认**: 自动生成的标签和重要程度建议人工快速扫一眼，确保准确。
