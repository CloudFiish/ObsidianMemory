---
name: obsidian-memory-recorder
description: Obsidian 智能记录技能 - 负责将高价值信息持久化保存到 Obsidian Bases 系统。当用户明确要求"记录"、"保存"、"创建笔记"、"会议记录"或使用 /record, /decision 等命令时。当用户在对话中陈述了**个人偏好**（如工具习惯）、**重要事实**、**关键决策**、**项目背景**或**长期规划**时，即使没有包含"记录"一词，也应主动触发。当用户要求"总结刚才的对话"或"整理一下要点"时。触发后，智能分析内容价值，自动推断记录类型（偏好/决策/日志/知识），提取关键字段（标题、标签、重要程度），并调用工具完成写入。
---

# Obsidian 记录技能

## 概述

这个 skill 帮助你快速记录信息到 Obsidian Bases 记忆系统中，支持多种记录方式。

**核心功能**:
- 对话中实时记录，自动提取关键信息
- 结构化表单记录，交互式填写字段
- 快捷命令记录，专用命令快速操作
- 自动填充标题、标签、重要程度

## 用户交互流程

### 问题 1: 选择记录模式

```
请选择记录模式：

[1] 对话中实时记录
    自动从对话中提取信息
    生成标题、推断标签和重要程度
    适合：快速记录讨论内容

[2] 结构化表单记录
    交互式填写所有字段
    完整控制记录内容
    适合：详细记录复杂信息

[3] 快捷命令记录
    使用专用命令快速记录
    决策、会议、学习等类型
    适合：频繁记录特定类型

请选择 [1-3]:
```

### 问题 2: 输入记录内容

根据选择的模式，收集相应信息：

#### 模式 1: 实时记录
```
请输入要记录的内容：

示例：
- "我们决定使用 PostgreSQL 作为数据库"
- "讨论了 API 设计方案"
- "学习了 React Hooks"

内容:
```

#### 模式 2: 结构化记录
```
请填写以下信息（*为必填）：

标题*: [输入]
类型*: [选择：每日日志/决策/任务/学习笔记/会议记录/用户偏好]
内容*: [输入]
标签: [选择或输入，如 #技术 #决策]
重要程度: [1-5 星]
相关项目: [可选]
状态: [选择：进行中/已完成/暂停/已归档]
```

#### 模式 3: 快捷命令
```
请选择快捷命令：

/d [decision] - 快捷记录决策
/m [meeting] - 快捷记录会议
/l [learn] - 快捷记录学习

请输入命令和内容：
示例：
- /d 使用 PostgreSQL 作为数据库
- /m API 设计 Alice, Bob
- /l 学习了 React Hooks
```

### 问题 3: 确认和创建

```
📋 记录信息预览

✓ 标题: [生成的标题]
✓ 类型: [推断的类型]
✓ 标签: [推断的标签]
✓ 重要程度: [推断的星级]
✓ 相关项目: [填写的项目]
✓ 状态: [设置的状态]

是否确认创建？
[y] 确认创建
[1] 修改标题
[2] 修改重要程度
[3] 修改标签
[4] 添加项目
[0] 取消

请选择:
```

## 快速开始

### 方法 1: 使用脚本

**实时记录**:
```bash
python scripts/record.py <笔记库路径> <记录内容>
```

**结构化记录**:
```bash
python scripts/record_struct.py --interactive
```

**快捷决策**:
```bash
python scripts/record_decision.py <笔记库路径> <决策内容> [重要程度] [项目]
```

### 方法 2: 使用快捷命令

在支持命令的环境中直接使用：

```bash
# 实时记录
/record 我们决定使用 PostgreSQL

# 快捷决策
/decision 使用 PostgreSQL 4 Acme Dashboard

# 快捷会议
/meeting API 设计 Alice, Bob

# 快捷学习
/learn 学习了 React Hooks
```

## 记录模式详解

### 模式 1: 对话中实时记录

**特点**:
- 自动提取关键词
- 智能生成标题
- 推断标签和重要程度
- 显示预览并允许修改

**适用场景**:
- 快速记录讨论内容
- 自动提取决策信息
- 临时记录想法和灵感

**详细流程**:
1. 用户输入内容
2. 自动分析提取信息
3. 生成记录预览
4. 用户确认或修改
5. 创建记录到 memory/ 文件夹

**脚本**: `scripts/record.py`

### 模式 2: 结构化表单记录

**特点**:
- 交互式填写所有字段
- 完整控制记录内容
- 验证必填字段
- 适合复杂信息

**适用场景**:
- 详细记录重要信息
- 需要精确控制每个字段
- 结构化记录会议或决策

**详细流程**:
1. 询问标题（必填）
2. 选择类型（必填）
3. 输入内容（必填）
4. 填写标签（可选）
5. 设置重要程度（可选）
6. 添加项目（可选）
7. 选择状态（可选）
8. 确认创建

**脚本**: `scripts/record_struct.py`

### 模式 3: 快捷命令记录

**特点**:
- 专用命令快速操作
- 预设类型和标签
- 最少输入创建记录
- 高效频繁记录

**可用命令**:
- `/decision` 或 `/d` - 快捷记录决策
- `/meeting` 或 `/m` - 快捷记录会议
- `/learn` 或 `/l` - 快捷记录学习

**详细流程**:
1. 用户输入命令和内容
2. 自动设置类型和标签
3. 使用预设的重要程度
4. 生成结构化内容
5. 直接创建记录

**脚本**: `scripts/record_decision.py`

## 字段自动填充

### 标题生成
- 决策类: "决策 - [对象]"
- 会议类: "会议 - [主题] ([参与者])"
- 默认: 内容前 50 个字符

详见: [field_rules.md](references/field_rules.md)

### 标签推断
```python
数据库 → [#技术, #数据库]
API → [#技术, #API]
决策 → [#技术, #决策]
会议 → [#会议]
学习 → [#学习]
```

### 重要程度规则
```
决策 → 4⭐
重要/紧急 → 5⭐
学习/完成 → 3⭐
默认 → 3⭐
```

详见: [field_rules.md](references/field_rules.md)

## 输出格式

### 成功创建
```
✓ 记录已成功创建
📁 文件: memory/2026-02-02.md
📝 标题: 决策 - PostgreSQL
🏷️ 标签: #技术 #决策 #重要
⭐ 重要程度: ⭐⭐⭐⭐
🔗 相关项目: Acme Dashboard
📊 状态: 已完成

查看记录: [[memory/2026-02-02.md]]
```

### 已追加到现有文件
```
⚠️ 已追加到现有文件: 2026-02-02.md

✓ 记录已成功添加
📁 文件: memory/2026-02-02.md
```

### 错误输出
```
❌ 记录失败
原因: memory 文件夹不存在

解决方案:
1. 请先使用 obsidian-bases-memory skill 初始化系统
2. 确保笔记库路径正确
```

## 参考文档

### [field_rules.md](references/field_rules.md)

详细的字段自动填充规则。

**内容包括**:
- 标题生成算法
- 标签推断逻辑
- 重要程度规则
- 类型推断规则
- 日期时间自动填充

### [commands_guide.md](references/commands_guide.md)

完整的命令使用指南。

**内容包括**:
- 所有可用命令说明
- 命令别名
- 使用示例
- 批量记录
- 组合使用
- 错误处理
- 最佳实践

## 资产文件

### [recorder_config.json](assets/config/recorder_config.json)

配置文件，包含所有设置和映射规则。

**配置项**:
- 记录模式设置
- 字段映射规则
- 重要程度规则
- 类型默认值

### [record_template.md](assets/templates/record_template.md)

通用记录模板。

## 工作流程

### 完整记录流程

```
用户触发技能
    ↓
选择记录模式（1/2/3）
    ↓
输入内容（根据模式）
    ↓
自动填充字段
    ↓
显示预览
    ↓
用户确认或修改
    ↓
创建记录
    ↓
输出结果
```

### 快捷决策流程

```
输入: /decision 使用 PostgreSQL
    ↓
自动设置:
  - 类型: 决策
  - 标签: #技术 #决策 #重要
  - 重要程度: 4⭐
    ↓
生成结构化内容
    ↓
创建记录
    ↓
输出成功信息
```

## 配置选项

修改 `assets/config/recorder_config.json` 自定义行为：

```json
{
  "auto_title_generation": true,      // 自动生成标题
  "auto_tag_inference": true,         // 自动推断标签
  "default_importance": 3,            // 默认重要程度
  "require_confirmation": true,         // 要求用户确认
  "auto_open_after_create": false      // 创建后自动打开
}
```

## 常见问题

### Q: 如何修改自动填充的字段？

A: 在预览显示时选择修改选项（1-4），或编辑配置文件修改默认规则。详见 [field_rules.md](references/field_rules.md)

### Q: 可以批量记录吗？

A: 可以使用快捷命令多次调用，或开发批量导入功能。参见 [commands_guide.md](references/commands_guide.md)

### Q: 如何集成到 Obsidian？

A: 使用 Obsidian 的命令面板配置快捷键，或使用 Templater 插件集成命令。

### Q: 记录后如何查看？

A: 在 Obsidian Bases 数据库中查看，或使用链接打开文件。

### Q: 如何添加自定义快捷命令？

A: 编辑配置文件或创建新的专用脚本。

## 故障排查

### 问题: 记录创建失败

**检查**:
1. memory 文件夹是否存在
2. 文件权限是否正确
3. YAML frontmatter 格式是否正确

**解决方案**:
- 使用 obsidian-bases-memory skill 初始化系统
- 检查文件权限
- 验证字段值

### 问题: 自动填充不准确

**检查**:
1. 关键词映射是否正确
2. 内容是否足够清晰

**解决方案**:
- 在预览阶段手动修改
- 调整配置中的映射规则
- 使用结构化记录模式

详见 [commands_guide.md](references/commands_guide.md) 的故障排查部分。

## 最佳实践

1. **使用快捷命令** - 频繁记录类型使用专用命令更高效
2. **及时记录** - 讨论结束后立即记录，避免遗漏
3. **信任自动填充** - 仅在必要时修改，节省时间
4. **保持一致性** - 使用相同的关键词触发相同类型
5. **定期检查** - 每周检查记录准确性，完善信息

详见: [commands_guide.md](references/commands_guide.md) 的最佳实践部分。

## 总结

这个 skill 提供了灵活的记录方式：

✅ **三种记录模式** - 实时、结构化、快捷命令
✅ **智能自动填充** - 标题、标签、重要程度自动推断
✅ **完整控制选项** - 支持用户确认和修改
✅ **灵活扩展** - 易于添加新命令和规则

开始使用：
1. 选择记录模式
2. 输入内容
3. 确认创建
4. 查看记录！
